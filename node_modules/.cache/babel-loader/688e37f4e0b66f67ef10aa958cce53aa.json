{"ast":null,"code":"import _slicedToArray from\"/Users/kittabit/Desktop/occasiongenius/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/Users/kittabit/Desktop/occasiongenius/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/kittabit/Desktop/occasiongenius/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/kittabit/Desktop/occasiongenius/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/kittabit/Desktop/occasiongenius/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/kittabit/Desktop/occasiongenius/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/kittabit/Desktop/occasiongenius/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/kittabit/Desktop/occasiongenius/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component}from'react';import Loading from\"../Components/Loading\";import Breadcrumbs from\"../Components/Breadcrumbs\";import EventFilter from'../Components/EventFilter';import EventGridItem from'../Components/EventGridItem';import ReactGA from'react-ga';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Events=/*#__PURE__*/function(_Component){_inherits(Events,_Component);var _super=_createSuper(Events);function Events(props){var _this;_classCallCheck(this,Events);if(window.ogSettings.environment===\"dev\"){var api_base_url=\"http://127.0.0.1:3000\";}else{var api_base_url=\"https://widgetapi.occasiongenius.com\";}_this=_super.call(this,props);_this.fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isLoading:1});_context.next=3;return fetch(_this.state.api_base_url+_this.state.events_url).then(function(r){return r.json();}).then(function(result){_this.setState({events:result,isLoading:0});}).catch(function(e){console.log(e);});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleCategories=function(e){var value=Array.from(e.target.selectedOptions,function(option){return option.value;});_this.setState({filter_categories:value});};_this.handleAreas=function(e){var value=Array.from(e.target.selectedOptions,function(option){return option.value;});_this.setState({filter_areas:value});};_this.state={api_base_url:api_base_url,current_page:[],next_page:[],max_pages:[],events:[],events_url:'/api/events/',isLoading:1,start_date:window.ogSettings.og_base_date,end_date:window.ogSettings.og_max_base_date,min_date:window.ogSettings.og_min_base_date,max_date:window.ogSettings.og_max_base_date,filter_categories:'',filter_areas:''};_this.handleStartDate=_this.handleStartDate.bind(_assertThisInitialized(_this));_this.handleEndDate=_this.handleEndDate.bind(_assertThisInitialized(_this));_this.handleCategories=_this.handleCategories.bind(_assertThisInitialized(_this));_this.handleAreas=_this.handleAreas.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Events,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Promise.all([fetch(this.state.api_base_url+this.state.events_url)]).then(function(_ref2){var _ref3=_slicedToArray(_ref2,1),res=_ref3[0];return Promise.all([res.json()]);}).then(function(_ref4){var _ref5=_slicedToArray(_ref4,1),cat_data=_ref5[0];return _this2.setState({events:cat_data,isLoading:0});});document.title=\"All Local Events\";if(window.ogSettings.og_ga_ua){ReactGA.pageview(window.location.pathname+window.location.search);}}},{key:\"handleStartDate\",value:function handleStartDate(event){this.setState({start_date:event.target.value,min_date:event.target.value});}},{key:\"handleEndDate\",value:function handleEndDate(event){this.setState({end_date:event.target.value});}},{key:\"handleSubmit\",value:function handleSubmit(event){var fetch_url=\"/wp-json/occasiongenius/v1/events?limit=100&filter_start=\"+this.state.start_date+\"&filter_end=\"+this.state.end_date+\"&filter_flags=\"+this.state.filter_categories+\"&filter_areas=\"+this.state.filter_areas;console.log(\":: Fetch: \"+fetch_url);this.fetchData(fetch_url);window.scrollTo({top:0,behavior:\"smooth\"});event.preventDefault();}},{key:\"render\",value:function render(){var _this$state$events;console.table(this.state.events);var _this$state=this.state,current_page=_this$state.current_page,next_page=_this$state.next_page,max_pages=_this$state.max_pages;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Breadcrumbs,{page_name:\"All Local Events\",disable_all_events:\"true\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flow-root\",children:/*#__PURE__*/_jsx(\"p\",{className:\"float-left text-gray-800 text-3xl font-semibold mb-4\",children:\"All Local Events\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full flex-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col md:w-1/5\",children:/*#__PURE__*/_jsx(EventFilter,{fetchData:this.fetchData,handleStartDate:this.handleStartDate,handleEndDate:this.handleEndDate,handleCategories:this.handleCategories,handleAreas:this.handleAreas,handleSubmit:this.handleSubmit,start_date:this.state.start_date,end_date:this.state.end_date,min_date:this.state.min_date,max_date:this.state.max_date})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col md:w-4/5 items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-12 px-18 gap-5\",children:this.state.isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(_Fragment,{children:(_this$state$events=this.state.events)===null||_this$state$events===void 0?void 0:_this$state$events.map(function(item,index){return/*#__PURE__*/_jsx(EventGridItem,{item:item},index);})})})})]})]});}}]);return Events;}(Component);export default Events;","map":{"version":3,"sources":["/Users/kittabit/Desktop/occasiongenius/src/Pages/Events.js"],"names":["React","Component","Loading","Breadcrumbs","EventFilter","EventGridItem","ReactGA","Events","props","window","ogSettings","environment","api_base_url","fetchData","url","setState","isLoading","fetch","state","events_url","then","r","json","result","events","catch","e","console","log","handleCategories","value","Array","from","target","selectedOptions","option","filter_categories","handleAreas","filter_areas","current_page","next_page","max_pages","start_date","og_base_date","end_date","og_max_base_date","min_date","og_min_base_date","max_date","handleStartDate","bind","handleEndDate","handleSubmit","Promise","all","res","cat_data","document","title","og_ga_ua","pageview","location","pathname","search","event","fetch_url","scrollTo","top","behavior","preventDefault","table","map","item","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Loading from \"../Components/Loading\"\nimport Breadcrumbs from \"../Components/Breadcrumbs\"\nimport EventFilter from '../Components/EventFilter';\nimport EventGridItem from '../Components/EventGridItem';\nimport ReactGA from 'react-ga';\nclass Events extends Component {\n\n    constructor (props){\n\n        if(window.ogSettings.environment === \"dev\"){\n            var api_base_url = \"http://127.0.0.1:3000\";\n        }else{\n            var api_base_url = \"https://widgetapi.occasiongenius.com\";\n        }\n\n        super(props);\n        this.state = {\n            api_base_url: api_base_url,\n            current_page: [],\n            next_page: [],\n            max_pages: [],\n            events: [],\n            events_url: '/api/events/',\n            isLoading: 1,\n            start_date: window.ogSettings.og_base_date,\n            end_date: window.ogSettings.og_max_base_date,\n            min_date: window.ogSettings.og_min_base_date,\n            max_date: window.ogSettings.og_max_base_date,\n            filter_categories: '',\n            filter_areas: ''\n        }\n        \n        this.handleStartDate = this.handleStartDate.bind(this);\n        this.handleEndDate = this.handleEndDate.bind(this);\n        this.handleCategories = this.handleCategories.bind(this);\n        this.handleAreas = this.handleAreas.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n    \n    componentDidMount() {\n\n        Promise.all([\n          fetch(this.state.api_base_url + this.state.events_url),\n        ])\n        .then(([res]) => Promise.all([res.json()]))\n        .then(([cat_data]) => this.setState({\n          events: cat_data,\n          isLoading: 0\n        }));\n\n        document.title = \"All Local Events\";\n\n        if(window.ogSettings.og_ga_ua){\n            ReactGA.pageview(window.location.pathname + window.location.search);\n        }          \n\n    } \n\n    fetchData = async (url) => {\n    \n        this.setState({\n            isLoading: 1\n        });\n        \n        await fetch(this.state.api_base_url + this.state.events_url)\n          .then((r) => r.json())\n          .then((result) => {\n            this.setState({\n                events: result,\n                isLoading: 0\n            });\n          })\n          .catch((e) => {\n            console.log(e);\n          });\n    \n    };  \n\n    handleStartDate(event) {\n        this.setState({\n            start_date: event.target.value,\n            min_date: event.target.value\n        });\n    }\n\n    handleEndDate(event) {\n        this.setState({\n            end_date: event.target.value\n        });\n    }\n\n    handleCategories = (e) => {\n        let value = Array.from(e.target.selectedOptions, option => option.value);\n        this.setState({filter_categories: value});\n    }\n\n    handleAreas = (e) => {\n        let value = Array.from(e.target.selectedOptions, option => option.value);\n        this.setState({filter_areas: value});\n    }    \n\n    handleSubmit(event) {        \n        var fetch_url = \"/wp-json/occasiongenius/v1/events?limit=100&filter_start=\" + this.state.start_date + \"&filter_end=\" + this.state.end_date + \"&filter_flags=\" + this.state.filter_categories + \"&filter_areas=\" + this.state.filter_areas;\n        console.log(\":: Fetch: \" + fetch_url);\n\n        this.fetchData(fetch_url);\n        window.scrollTo({\n            top: 0,\n            behavior: \"smooth\"\n        });\n        event.preventDefault();\n    }\n\n    render(){\n\n        console.table(this.state.events);\n\n        const { current_page, next_page, max_pages } = this.state;\n\n        return (\n            <>\n\n                <Breadcrumbs page_name=\"All Local Events\" disable_all_events=\"true\" />\n                \n                <div className=\"col-span-12\">\n                    <div className=\"flow-root\">\n                        <p className=\"float-left text-gray-800 text-3xl font-semibold mb-4\">\n                            All Local Events\n                        </p>\n                    </div>\n                </div>                \n                    \n      \n                <div className=\"flex w-full flex-wrap\">                          \n                    <div className=\"flex flex-col md:w-1/5\">\n                        <EventFilter \n                            fetchData={this.fetchData}  \n                            handleStartDate={this.handleStartDate}\n                            handleEndDate={this.handleEndDate}\n                            handleCategories={this.handleCategories}\n                            handleAreas={this.handleAreas}\n                            handleSubmit={this.handleSubmit}\n                            start_date={this.state.start_date}\n                            end_date={this.state.end_date}\n                            min_date={this.state.min_date}\n                            max_date={this.state.max_date}\n                            />\n                    </div>\n\n                    <div className=\"flex flex-col md:w-4/5 items-center\">\n                        <div className=\"grid grid-cols-12 px-18 gap-5\">\n                            {this.state.isLoading ? (\n                                <Loading />\n                            ) : (\n                                <>                            \n                                    {this.state.events?.map((item, index) => (   \n                                        <EventGridItem item={item} key={index} />\n                                    ))}\n                                </>\n                            )}                                            \n                        </div>\n                    </div>\n                </div>\n\n            </>\n        )\n    }\n}\n\nexport default Events"]},"metadata":{},"sourceType":"module"}