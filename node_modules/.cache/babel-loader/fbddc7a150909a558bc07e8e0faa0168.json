{"ast":null,"code":"import _slicedToArray from\"/Users/kittabit/dev/occasion-genius-wp/og-events/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/Users/kittabit/dev/occasion-genius-wp/og-events/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/kittabit/dev/occasion-genius-wp/og-events/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/kittabit/dev/occasion-genius-wp/og-events/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/kittabit/dev/occasion-genius-wp/og-events/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/kittabit/dev/occasion-genius-wp/og-events/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/kittabit/dev/occasion-genius-wp/og-events/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component}from'react';import Loading from\"../Components/Loading\";import Breadcrumbs from\"../Components/Breadcrumbs\";import EventFilter from'../Components/EventFilter';import EventGridItem from'../Components/EventGridItem';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Events=/*#__PURE__*/function(_Component){_inherits(Events,_Component);var _super=_createSuper(Events);function Events(props){var _this;_classCallCheck(this,Events);_this=_super.call(this,props);_this.fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isLoading:1});_context.next=3;return fetch(url).then(function(r){return r.json();}).then(function(result){_this.setState({events:result.events,current_page:result.info.current_page,next_page:result.info.next_page,max_pages:result.info.max_pages,isLoading:0});}).catch(function(e){console.log(e);});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.nextPage=function(){_this.setState({current_page:_this.state.current_page+1,isLoading:1},function(){var events_url=_this.state.events_url+_this.state.current_page;_this.fetchData(events_url);window.scrollTo({top:0,behavior:\"smooth\"});});};_this.prevPage=function(){_this.setState({current_page:_this.state.current_page-1,isLoading:1},function(){var events_url=_this.state.events_url+_this.state.current_page;_this.fetchData(events_url);window.scrollTo({top:0,behavior:\"smooth\"});});};_this.state={current_page:[],next_page:[],max_pages:[],events:[],events_url:'/wp-json/occasiongenius/v1/events?limit=12&page=',isLoading:1};return _this;}_createClass(Events,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Promise.all([fetch('/wp-json/occasiongenius/v1/events?limit=12')]).then(function(_ref2){var _ref3=_slicedToArray(_ref2,1),res=_ref3[0];return Promise.all([res.json()]);}).then(function(_ref4){var _ref5=_slicedToArray(_ref4,1),cat_data=_ref5[0];return _this2.setState({events:cat_data.events,current_page:cat_data.info.current_page,next_page:cat_data.info.next_page,max_pages:cat_data.info.max_pages,isLoading:0});});document.title=\"All Local Events\";}},{key:\"render\",value:function render(){var _this$state=this.state,current_page=_this$state.current_page,next_page=_this$state.next_page,max_pages=_this$state.max_pages;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Breadcrumbs,{parent_title:\"All Categories\",parent_url:\"/events/categories/\",page_name:\"All Local Events\",disable_all_events:\"true\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flow-root\",children:/*#__PURE__*/_jsx(\"p\",{className:\"float-left text-gray-800 text-3xl font-semibold mb-4\",children:\"All Local Events\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full flex-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col md:w-1/5\",children:/*#__PURE__*/_jsx(EventFilter,{fetchData:this.fetchData})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col md:w-4/5 items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-12 px-18 gap-5\",children:this.state.isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(_Fragment,{children:this.state.events.map(function(item,index){return/*#__PURE__*/_jsx(EventGridItem,{item:item},index);})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-6 lg:space-x-8 mt-8 md:mt-16 mt-16\",children:[current_page>1&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{onClick:this.prevPage,className:\"block w-full md:w-3/5 border border-gray-800 text-base font-medium leading-none text-white uppercase py-6 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-800 bg-gray-800 hover:text-white no-underline text-center\",children:\"Previous Page\"})}),next_page<=max_pages&&max_pages!==current_page&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{onClick:this.nextPage,className:\"block w-full md:w-3/5 border border-gray-800 text-base font-medium leading-none text-white uppercase py-6 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-800 bg-gray-800 hover:text-white no-underline text-center\",children:\"Next Page\"})})]})]});}}]);return Events;}(Component);export default Events;","map":{"version":3,"sources":["/Users/kittabit/dev/occasion-genius-wp/og-events/src/Pages/Events.js"],"names":["React","Component","Loading","Breadcrumbs","EventFilter","EventGridItem","Events","props","fetchData","url","setState","isLoading","fetch","then","r","json","result","events","current_page","info","next_page","max_pages","catch","e","console","log","nextPage","state","events_url","window","scrollTo","top","behavior","prevPage","Promise","all","res","cat_data","document","title","map","item","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Loading from \"../Components/Loading\"\nimport Breadcrumbs from \"../Components/Breadcrumbs\"\nimport EventFilter from '../Components/EventFilter';\nimport EventGridItem from '../Components/EventGridItem';\nclass Events extends Component {\n\n    constructor (props){\n\n        super(props);\n        this.state = {\n            current_page: [],\n            next_page: [],\n            max_pages: [],\n            events: [],\n            events_url: '/wp-json/occasiongenius/v1/events?limit=12&page=',\n            isLoading: 1,\n        }\n        \n    }\n    \n    componentDidMount() {\n\n        Promise.all([\n          fetch('/wp-json/occasiongenius/v1/events?limit=12'),\n        ])\n        .then(([res]) => Promise.all([res.json()]))\n        .then(([cat_data]) => this.setState({\n          events: cat_data.events,\n          current_page: cat_data.info.current_page, \n          next_page: cat_data.info.next_page, \n          max_pages: cat_data.info.max_pages, \n          isLoading: 0\n        }));\n\n        document.title = \"All Local Events\";\n\n    } \n\n    fetchData = async (url) => {\n    \n        this.setState({\n            isLoading: 1\n        });\n        \n        await fetch(url)\n          .then((r) => r.json())\n          .then((result) => {\n            this.setState({\n                events: result.events,\n                current_page: result.info.current_page, \n                next_page: result.info.next_page, \n                max_pages: result.info.max_pages, \n                isLoading: 0\n            });\n          })\n          .catch((e) => {\n            console.log(e);\n          });\n    \n    };  \n    \n    nextPage = () => {\n    \n        this.setState({\n            current_page: this.state.current_page + 1,\n            isLoading: 1\n          },\n          () => {\n            const events_url = this.state.events_url + this.state.current_page;\n            this.fetchData(events_url);\n            window.scrollTo({\n              top: 0,\n              behavior: \"smooth\"\n            });\n          }\n        );\n    \n    };\n    \n    prevPage = () => {\n    \n        this.setState({\n            current_page: this.state.current_page - 1,\n            isLoading: 1\n          },\n          () => {\n            const events_url = this.state.events_url + this.state.current_page;\n            this.fetchData(events_url);\n            window.scrollTo({\n              top: 0,\n              behavior: \"smooth\"\n            });\n          }\n        );\n    \n    };    \n\n    render(){\n\n        const { current_page, next_page, max_pages } = this.state;\n\n        return (\n            <>\n\n                <Breadcrumbs parent_title=\"All Categories\" parent_url=\"/events/categories/\" page_name=\"All Local Events\" disable_all_events=\"true\" />\n                \n                <div className=\"col-span-12\">\n                    <div className=\"flow-root\">\n                        <p className=\"float-left text-gray-800 text-3xl font-semibold mb-4\">\n                            All Local Events\n                        </p>\n                    </div>\n                </div>                \n                    \n      \n                <div className=\"flex w-full flex-wrap\">                          \n\n                    <div className=\"flex flex-col md:w-1/5\">\n                        <EventFilter fetchData={this.fetchData} />\n                    </div>\n\n                    <div className=\"flex flex-col md:w-4/5 items-center\">\n                        <div className=\"grid grid-cols-12 px-18 gap-5\">\n                            {this.state.isLoading ? (\n                                <Loading />\n                            ) : (\n                                <>                            \n                                    {this.state.events.map((item, index) => (   \n                                        <EventGridItem item={item} key={index} />\n                                    ))}\n                                </>\n                            )}                                            \n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"flex items-center flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-6 lg:space-x-8 mt-8 md:mt-16 mt-16\">\n                    {current_page > 1 &&\n                        <>\n                            <button onClick={this.prevPage} className=\"block w-full md:w-3/5 border border-gray-800 text-base font-medium leading-none text-white uppercase py-6 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-800 bg-gray-800 hover:text-white no-underline text-center\">\n                                Previous Page\n                            </button>\n                        </>\n                    }\n\n                    { next_page <= max_pages && max_pages !== current_page &&\n                        <>\n                            <button onClick={this.nextPage} className=\"block w-full md:w-3/5 border border-gray-800 text-base font-medium leading-none text-white uppercase py-6 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-800 bg-gray-800 hover:text-white no-underline text-center\">\n                                Next Page\n                            </button>                    \n                        </>\n                    }\n                </div>\n\n            </>\n        )\n    }\n}\n\nexport default Events"]},"metadata":{},"sourceType":"module"}