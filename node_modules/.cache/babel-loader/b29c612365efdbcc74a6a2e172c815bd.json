{"ast":null,"code":"import _slicedToArray from\"/Users/kittabit/Desktop/occasiongenius/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _classCallCheck from\"/Users/kittabit/Desktop/occasiongenius/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/kittabit/Desktop/occasiongenius/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/kittabit/Desktop/occasiongenius/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/kittabit/Desktop/occasiongenius/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Link}from\"react-router-dom\";import Header from'../Components/Header';import EventCategorySmall from'../Components/EventCategorySmall';import PersonalizedEvents from'../Components/PersonalizedEvents';import UpcomingForYou from'../Components/UpcomingForYou';import ReactGA from'react-ga';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);if(window.ogSettings.environment===\"dev\"){var api_base_url=\"http://127.0.0.1:3000\";}else{var api_base_url=\"https://widgetapi.occasiongenius.com\";}_this=_super.call(this,props);_this.state={api_base_url:api_base_url,user_personalized_events:[],user_liked_events:[],user_personalized_events_count:0,user_liked_events_count:0};return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;document.title=\"Local Events\";if(localStorage.getItem('og_user_flags')!==null){var og_user_flags=JSON.parse(localStorage.getItem('og_user_flags'));Promise.all([fetch(this.state.api_base_url+'/api/events/flag/'+og_user_flags.join(\",\"))]).then(function(_ref){var _ref2=_slicedToArray(_ref,1),res=_ref2[0];return Promise.all([res.json()]);}).then(function(_ref3){var _ref4=_slicedToArray(_ref3,1),data=_ref4[0];return _this2.setState({user_personalized_events:data.events,user_personalized_events_count:data.total});});}if(localStorage.getItem('og_user_liked')!==null){var og_user_liked=JSON.parse(localStorage.getItem('og_user_liked'));Promise.all([fetch('/wp-json/occasiongenius/v1/bucket?events='+og_user_liked.join(\",\"))]).then(function(_ref5){var _ref6=_slicedToArray(_ref5,1),res=_ref6[0];return Promise.all([res.json()]);}).then(function(_ref7){var _ref8=_slicedToArray(_ref7,1),data=_ref8[0];return _this2.setState({user_liked_events:data.events,user_liked_events_count:data.total});});}if(window.ogSettings.og_ga_ua){ReactGA.pageview(window.location.pathname+window.location.search);}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(UpcomingForYou,{}),/*#__PURE__*/_jsx(Header,{}),this.state.user_personalized_events_count===4&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(PersonalizedEvents,{personalized:this.state.user_personalized_events_count,likes:this.state.user_liked_events_count,events:this.state.user_personalized_events,clear:\"false\"})}),this.state.user_liked_events_count===4&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(PersonalizedEvents,{title:\"Recently Liked Events\",personalized:this.state.user_personalized_events_count,likes:this.state.user_liked_events_count,events:this.state.user_liked_events,liked:\"true\",clear:\"true\"})}),JSON.parse(window.ogSettings.og_featured_flags).map(function(item,index){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(EventCategorySmall,{event_cat_id:item},index)});}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-6 lg:space-x-8 mt-8 md:mt-16 og-home-view-all-buttons\",children:[/*#__PURE__*/_jsx(Link,{to:\"/categories\",className:\"block w-full md:w-3/5 border border-gray-800 text-base font-medium leading-none text-white uppercase py-6 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-800 bg-gray-800 hover:bg-gray-600 hover:text-white no-underline text-center og-home-view-all-categories\",children:\"View All Categories\"}),/*#__PURE__*/_jsx(Link,{to:\"/all\",className:\"block w-full md:w-3/5 border border-gray-800 text-base font-medium leading-none text-white uppercase py-6 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-800 bg-gray-800 hover:bg-gray-600 hover:text-white no-underline text-center og-home-view-all-events\",children:\"View All Events\"})]})]});}}]);return Home;}(Component);export default Home;","map":{"version":3,"sources":["/Users/kittabit/Desktop/occasiongenius/src/Pages/Home.js"],"names":["React","Component","Link","Header","EventCategorySmall","PersonalizedEvents","UpcomingForYou","ReactGA","Home","props","window","ogSettings","environment","api_base_url","state","user_personalized_events","user_liked_events","user_personalized_events_count","user_liked_events_count","document","title","localStorage","getItem","og_user_flags","JSON","parse","Promise","all","fetch","join","then","res","json","data","setState","events","total","og_user_liked","og_ga_ua","pageview","location","pathname","search","og_featured_flags","map","item","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from \"react-router-dom\";\nimport Header from '../Components/Header';\nimport EventCategorySmall from '../Components/EventCategorySmall';\nimport PersonalizedEvents from '../Components/PersonalizedEvents';\nimport UpcomingForYou from '../Components/UpcomingForYou';\nimport ReactGA from 'react-ga';\nclass Home extends Component {\n\n    constructor (props){\n\n        if(window.ogSettings.environment === \"dev\"){\n            var api_base_url = \"http://127.0.0.1:3000\";\n        }else{\n            var api_base_url = \"https://widgetapi.occasiongenius.com\";\n        }\n\n        super(props);\n        this.state = {\n            api_base_url: api_base_url,\n            user_personalized_events: [],\n            user_liked_events: [],\n            user_personalized_events_count: 0,\n            user_liked_events_count: 0,\n        }\n        \n    }\n    \n    componentDidMount() {\n\n        document.title = \"Local Events\";\n        if(localStorage.getItem('og_user_flags') !== null){\n\n            var og_user_flags = JSON.parse(localStorage.getItem('og_user_flags'));\n\n            Promise.all([\n                fetch( this.state.api_base_url + '/api/events/flag/' + og_user_flags.join(\",\")),\n              ])\n              .then(([res]) => Promise.all([res.json()]))\n              .then(([data]) => this.setState({\n                user_personalized_events: data.events,\n                user_personalized_events_count: data.total\n            }));\n\n        }\n\n        if(localStorage.getItem('og_user_liked') !== null){\n\n            var og_user_liked = JSON.parse(localStorage.getItem('og_user_liked'));\n\n            Promise.all([\n                fetch('/wp-json/occasiongenius/v1/bucket?events=' + og_user_liked.join(\",\")),\n              ])\n              .then(([res]) => Promise.all([res.json()]))\n              .then(([data]) => this.setState({\n                user_liked_events: data.events,\n                user_liked_events_count: data.total\n            }));\n\n        }        \n\n        if(window.ogSettings.og_ga_ua){\n            ReactGA.pageview(window.location.pathname + window.location.search);\n        }          \n    }   \n\n    render(){\n\n        return (\n            <>\n \n                <UpcomingForYou />\n\n                <Header />\n\n                {this.state.user_personalized_events_count === 4 &&\n                    <>\n                        <PersonalizedEvents personalized={ this.state.user_personalized_events_count } likes={ this.state.user_liked_events_count } events={ this.state.user_personalized_events } clear=\"false\" />\n                    </>\n                }\n\n                {this.state.user_liked_events_count === 4 &&\n                    <>\n                        <PersonalizedEvents title=\"Recently Liked Events\" personalized={ this.state.user_personalized_events_count } likes={ this.state.user_liked_events_count } events={ this.state.user_liked_events } liked=\"true\" clear=\"true\" />\n                    </>\n                }                \n\n                {JSON.parse(window.ogSettings.og_featured_flags).map((item, index) => (\n                  <>\n                    <EventCategorySmall event_cat_id={item} key={index} />\n                  </>\n                ))}\n\n                <div className=\"flex items-center flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-6 lg:space-x-8 mt-8 md:mt-16 og-home-view-all-buttons\">\n                    <Link to=\"/categories\" className=\"block w-full md:w-3/5 border border-gray-800 text-base font-medium leading-none text-white uppercase py-6 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-800 bg-gray-800 hover:bg-gray-600 hover:text-white no-underline text-center og-home-view-all-categories\">\n                        View All Categories\n                    </Link>\n\n                    <Link to=\"/all\" className=\"block w-full md:w-3/5 border border-gray-800 text-base font-medium leading-none text-white uppercase py-6 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-800 bg-gray-800 hover:bg-gray-600 hover:text-white no-underline text-center og-home-view-all-events\">\n                        View All Events\n                    </Link>                    \n                </div>\n\n            </>\n        )\n    }\n}\n\nexport default Home\n"]},"metadata":{},"sourceType":"module"}